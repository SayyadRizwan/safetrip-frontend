<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeTrip - Smart Tourist Safety System</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCx9-J1fXZX0nYaFwOrPd6_2RYZ47YE_YU&libraries=geometry"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <i class="fas fa-shield-alt"></i>
                <h2>SafeTrip</h2>
            </div>
            <div class="loading-spinner"></div>
            <p>Initializing Safety System...</p>
        </div>
    </div>

    <!-- Landing Page -->
    <div id="landingPage" class="landing-page hidden">
        <header class="landing-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-shield-alt"></i>
                        <h1>SafeTrip</h1>
                    </div>
                    <div class="language-selector">
                        <select id="languageSelect" class="form-control">
                            <option value="en">ðŸ‡ºðŸ‡¸ English</option>
                            <option value="hi">ðŸ‡®ðŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <main class="landing-main">
            <div class="container">
                <div class="hero-section">
                    <div class="hero-content">
                        <h2 class="hero-title">Smart Tourist Safety Monitoring & Incident Response System</h2>
                        <p class="hero-subtitle">Your safety companion for secure and worry-free travel experiences</p>
                        
                        <div class="features-grid">
                            <div class="feature-card">
                                <i class="fas fa-map-marked-alt"></i>
                                <h3>Live Location Tracking</h3>
                                <p>Real-time GPS monitoring and geo-fencing alerts</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-exclamation-triangle"></i>
                                <h3>Emergency SOS</h3>
                                <p>Instant alert system for emergency situations</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-users-cog"></i>
                                <h3>Authority Dashboard</h3>
                                <p>Real-time monitoring and incident management</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-shield-alt"></i>
                                <h3>Safety Scoring</h3>
                                <p>Dynamic safety assessment based on location and time</p>
                            </div>
                        </div>

                        <div class="cta-buttons">
                            <button id="touristLoginBtn" class="btn btn--primary btn--lg">
                                <i class="fas fa-user"></i>
                                Tourist Portal
                            </button>
                            <button id="authorityLoginBtn" class="btn btn--secondary btn--lg">
                                <i class="fas fa-badge"></i>
                                Authority Portal
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Tourist Login Modal -->
    <div id="touristLoginModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tourist Registration/Login</h3>
                <button class="modal-close" onclick="closeModal('touristLoginModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="touristLoginForm">
                    <div class="form-group">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" id="touristName" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="touristPhone" placeholder="+91-XXXXXXXXXX" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="touristEmail" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Emergency Contact</label>
                        <input type="tel" class="form-control" id="touristEmergency" placeholder="+91-XXXXXXXXXX" required>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">
                        <i class="fas fa-sign-in-alt"></i>
                        Register & Continue
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Authority Login Modal -->
    <div id="authorityLoginModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Authority Login</h3>
                <button class="modal-close" onclick="closeModal('authorityLoginModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="authorityLoginForm">
                    <div class="form-group">
                        <label class="form-label">Officer ID</label>
                        <input type="text" class="form-control" id="officerID" placeholder="CST2205AC" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Department</label>
                        <select class="form-control" id="department" required>
                            <option value="">Select Department</option>
                            <option value="Police Department">Police Department</option>
                            <option value="Tourism Department">Tourism Department</option>
                            <option value="Emergency Services">Emergency Services</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">
                        <i class="fas fa-sign-in-alt"></i>
                        Login
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Tourist App -->
    <div id="touristApp" class="app-container hidden">
        <!-- Tourist Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <h3 id="touristNameDisplay">Welcome</h3>
                        <div class="safety-score">
                            Safety Score: <span id="safetyScoreDisplay" class="score-value">--</span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="locationToggle" class="btn btn--secondary btn--sm">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Location: OFF</span>
                    </button>
                    <button id="logoutBtn" class="btn btn--outline btn--sm">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Tourist Content -->
        <main class="app-main">
            <!-- Dashboard View -->
            <div id="touristDashboard" class="view active">
                <div class="dashboard-grid">
                    <div class="dashboard-card safety-card">
                        <div class="card-header">
                            <h4><i class="fas fa-shield-alt"></i> Safety Status</h4>
                        </div>
                        <div class="card-body">
                            <div class="safety-indicator">
                                <div class="safety-circle" id="safetyCircle">
                                    <span id="safetyScore">--</span>
                                </div>
                                <p id="safetyStatus">Getting location...</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card emergency-card">
                        <div class="card-body">
                            <button id="emergencyBtn" class="emergency-button">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>EMERGENCY SOS</span>
                            </button>
                            <p class="emergency-text">Tap for immediate assistance</p>
                        </div>
                    </div>

                    <div class="dashboard-card alerts-card">
                        <div class="card-header">
                            <h4><i class="fas fa-bell"></i> Nearby Alerts</h4>
                        </div>
                        <div class="card-body">
                            <div id="nearbyAlerts" class="alerts-list">
                                <p class="no-alerts">No alerts in your area</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card tips-card">
                        <div class="card-header">
                            <h4><i class="fas fa-lightbulb"></i> Safety Tips</h4>
                        </div>
                        <div class="card-body">
                            <div id="safetyTips" class="tips-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map View -->
            <div id="touristMap" class="view">
                <div class="map-container">
                    <div id="touristMapView" style="position: relative; height: 500px;"></div>
                    <div class="map-controls">
                        <button id="centerMapBtn" class="btn btn--primary">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                        <div class="map-legend">
                            <div class="legend-item">
                                <span class="legend-color safe"></span>
                                <span>Safe Zone</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color caution"></span>
                                <span>Caution Zone</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color danger"></span>
                                <span>Danger Zone</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerts View -->
            <div id="touristAlerts" class="view">
                <div class="alerts-container">
                    <div class="alerts-header">
                        <h3><i class="fas fa-bell"></i> All Alerts</h3>
                        <button id="reportIncidentBtn" class="btn btn--primary">
                            <i class="fas fa-plus"></i>
                            Report Incident
                        </button>
                    </div>
                    <div id="allAlertsList" class="alerts-list"></div>
                </div>
            </div>

            <!-- Profile View -->
            <div id="touristProfile" class="view">
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3 id="profileName">Tourist Profile</h3>
                    </div>
                    
                    <div class="profile-sections">
                        <div class="profile-section">
                            <h4>Personal Information</h4>
                            <div class="profile-info">
                                <div class="info-item">
                                    <label>Phone:</label>
                                    <span id="profilePhone">--</span>
                                </div>
                                <div class="info-item">
                                    <label>Email:</label>
                                    <span id="profileEmail">--</span>
                                </div>
                                <div class="info-item">
                                    <label>Emergency Contact:</label>
                                    <span id="profileEmergency">--</span>
                                </div>
                            </div>
                        </div>

                        <div class="profile-section">
                            <h4>Emergency Contacts</h4>
                            <div id="emergencyContacts" class="emergency-contacts"></div>
                        </div>

                        <div class="profile-section">
                            <h4>Settings</h4>
                            <div class="settings-list">
                                <div class="setting-item">
                                    <span>Location Sharing</span>
                                    <label class="switch">
                                        <input type="checkbox" id="locationSharingToggle">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="setting-item">
                                    <span>Push Notifications</span>
                                    <label class="switch">
                                        <input type="checkbox" id="notificationsToggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Tourist Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="touristDashboard">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </button>
            <button class="nav-item" data-view="touristMap">
                <i class="fas fa-map"></i>
                <span>Map</span>
            </button>
            <button class="nav-item" data-view="touristAlerts">
                <i class="fas fa-bell"></i>
                <span>Alerts</span>
                <span id="alertsBadge" class="nav-badge hidden">0</span>
            </button>
            <button class="nav-item" data-view="touristProfile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
        </nav>
    </div>

    <!-- Authority Dashboard -->
    <div id="authorityApp" class="app-container hidden">
        <!-- Authority Header -->
        <header class="app-header authority-header">
            <div class="header-content">
                <div class="authority-info">
                    <div class="authority-avatar">
                        <i class="fas fa-badge"></i>
                    </div>
                    <div class="authority-details">
                        <h3 id="authorityNameDisplay">Authority Dashboard</h3>
                        <p id="authorityDeptDisplay">Department</p>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="alert-counter">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="activeAlertsCount">0</span>
                        <span>Active Alerts</span>
                    </div>
                    <button id="authorityLogoutBtn" class="btn btn--outline btn--sm">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Authority Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="authorityDashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-view="touristHeatmap">
                    <i class="fas fa-users"></i>
                    <span>Tourist Map</span>
                </button>
                <button class="nav-item" data-view="alertManagement">
                    <i class="fas fa-bell"></i>
                    <span>Alert Management</span>
                </button>
                <button class="nav-item" data-view="incidentReports">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Incident Reports</span>
                </button>
                <button class="nav-item" data-view="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </button>
            </nav>
        </aside>

        <!-- Authority Main Content -->
        <main class="authority-main">
            <!-- Authority Dashboard View -->
            <div id="authorityDashboard" class="view active">
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-content">
                            <h4 id="totalTourists">0</h4>
                            <p>Active Tourists</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon alert"><i class="fas fa-exclamation-triangle"></i></div>
                        <div class="stat-content">
                            <h4 id="totalAlerts">0</h4>
                            <p>Active Alerts</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon success"><i class="fas fa-shield-alt"></i></div>
                        <div class="stat-content">
                            <h4 id="safeZones">0</h4>
                            <p>Safe Zones</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon danger"><i class="fas fa-clipboard-list"></i></div>
                        <div class="stat-content">
                            <h4 id="totalIncidents">0</h4>
                            <p>Total Incidents</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-section">
                        <h4><i class="fas fa-bell"></i> Recent Alerts</h4>
                        <div id="recentAlerts" class="alerts-list"></div>
                    </div>

                    <div class="dashboard-section">
                        <h4><i class="fas fa-map-marked-alt"></i> Tourist Locations</h4>
                        <div id="authorityMapView" style="position: relative; height: 300px;"></div>
                    </div>
                </div>
            </div>

            <!-- Tourist Heatmap View -->
            <div id="touristHeatmap" class="view">
                <div class="heatmap-controls">
                    <h3><i class="fas fa-users"></i> Tourist Location Heatmap</h3>
                    <div class="controls">
                        <button id="refreshHeatmap" class="btn btn--primary">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div id="heatmapView" style="position: relative; height: 600px;"></div>
            </div>

            <!-- Alert Management View -->
            <div id="alertManagement" class="view">
                <div class="alert-management-header">
                    <h3><i class="fas fa-bell"></i> Alert Management</h3>
                    <div class="alert-filters">
                        <select id="alertStatusFilter" class="form-control">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="resolved">Resolved</option>
                            <option value="investigating">Investigating</option>
                        </select>
                        <select id="alertTypeFilter" class="form-control">
                            <option value="">All Types</option>
                            <option value="sos">SOS</option>
                            <option value="geo-fence">Geo-fence</option>
                            <option value="incident">Incident</option>
                        </select>
                    </div>
                </div>
                <div id="alertManagementList" class="alerts-management-list"></div>
            </div>

            <!-- Incident Reports View -->
            <div id="incidentReports" class="view">
                <div class="incidents-header">
                    <h3><i class="fas fa-clipboard-list"></i> Incident Reports</h3>
                    <button id="generateEFIR" class="btn btn--primary">
                        <i class="fas fa-file-alt"></i>
                        Generate e-FIR
                    </button>
                </div>
                <div id="incidentsList" class="incidents-list"></div>
            </div>

            <!-- Analytics View -->
            <div id="analytics" class="view">
                <h3><i class="fas fa-chart-bar"></i> Analytics & Reports</h3>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h4>Safety Score Distribution</h4>
                        <div class="chart-container">
                            <canvas id="safetyChart"></canvas>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h4>Incident Types</h4>
                        <div class="chart-container">
                            <canvas id="incidentChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Report Incident Modal -->
    <div id="reportIncidentModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Report Incident</h3>
                <button class="modal-close" onclick="closeModal('reportIncidentModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="reportIncidentForm">
                    <div class="form-group">
                        <label class="form-label">Incident Type</label>
                        <select class="form-control" id="incidentType" required>
                            <option value="">Select Type</option>
                            <option value="theft">Theft</option>
                            <option value="harassment">Harassment</option>
                            <option value="medical">Medical Emergency</option>
                            <option value="accident">Accident</option>
                            <option value="unsafe_conditions">Unsafe Conditions</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="incidentDescription" rows="4" placeholder="Describe the incident..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" class="form-control" id="incidentLocation" placeholder="Current location will be used" readonly>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">
                        <i class="fas fa-paper-plane"></i>
                        Submit Report
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Emergency Alert Modal -->
    <div id="emergencyModal" class="modal hidden">
        <div class="modal-content emergency-modal">
            <div class="emergency-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Emergency Alert Sent</h3>
            </div>
            <div class="modal-body">
                <p>Your emergency alert has been sent to local authorities.</p>
                <p><strong>Location:</strong> <span id="emergencyLocation">Getting location...</span></p>
                <p><strong>Time:</strong> <span id="emergencyTime"></span></p>
                <div class="emergency-actions">
                    <button id="callPolice" class="btn btn--primary">
                        <i class="fas fa-phone"></i>
                        Call Police (100)
                    </button>
                    <button id="callMedical" class="btn btn--secondary">
                        <i class="fas fa-ambulance"></i>
                        Call Medical (108)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>